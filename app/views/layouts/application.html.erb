<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Circographe" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <% if controller_path.start_with?('admin') %>
      <%= stylesheet_link_tag 'dashboard', "data-turbo-track": "reload" %>
    <% elsif content_for?(:css_file) %>
      <%= stylesheet_link_tag content_for(:css_file), "data-turbo-track": "reload" %>
    <% end %>

    <%= javascript_importmap_tags %>
  </head>

  <body class="<%= controller_name %>-<%= action_name %>">
    <% if controller_path.start_with?('admin') %>
      <header class="admin-header">
        <div class="admin-header-left">
          <%= link_to "Retour au site", root_path, class: "btn btn-secondary" %>
        </div>
        <div class="admin-header-right">
          <%= link_to 'Votre Profil', edit_user_path(Current.user), class: 'btn btn-secondary' %>
          <%= link_to 'Se déconnecter', session_path, method: :delete, class: 'btn btn-danger' %>
        </div>
      </header>
      <main class="admin-layout">
        <aside class="admin-sidebar">
          <div class="sidebar-logo">
            <%= image_tag 'circo-admin.png', alt: 'Logo Admin' %>
          </div>
          <ul class="sidebar-menu">
            <li><%= link_to "Accueil", admin_dashboard_path, class: "sidebar-link" %></li>
            <li><%= link_to "Liste d'adhérents", admin_users_path, class: "sidebar-link" %></li>
            <li><%= link_to "Entraînements libre", "#", class: "sidebar-link" %></li>
            <li><%= link_to "Événements", "#", class: "sidebar-link" %></li>
            <li><%= link_to "Statistiques", "#", class: "sidebar-link" %></li>
            <li><%= link_to "Finances", "#", class: "sidebar-link" %></li>
            <li><%= link_to "Bloc notes", "#", class: "sidebar-link" %></li>
          </ul>
        </aside>
        <section class="admin-content">
          <%= yield %>
        </section>
      </main>
    <% else %>
      <%= render 'shared/navbar' %>
      <main>
        <%= yield %>
      </main>
    <% end %>

    <%= render 'shared/footer' %>
  </body>
</html>
